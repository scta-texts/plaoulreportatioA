
language: java
sudo: false
addons:
  apt:
    packages:
    - parallel
before_install:
  - unset _JAVA_OPTIONS
install:
  - wget 'https://github.com/papyri/jing-trang/releases/download/xsd_bce_leap_years-1.0/jing.jar'
  - mkdir -p schema/
  - wget -O schema/critical.rng 'https://raw.githubusercontent.com/lombardpress/lombardpress-schema/master/src/out/critical.rng'
  - wget -O schema/diplomatic.rng 'https://raw.githubusercontent.com/lombardpress/lombardpress-schema/master/src/out/diplomatic.rng'
  - wget -O schema/tdf.rng 'https://raw.githubusercontent.com/scta/tdf-schema/master/src/tdf-0.rng'

script:
  - for file in */*; do schema=$(grep -o "lbp-.*-1.0.0" $file); if [[ $file = *"transcriptions.xml"* ]]; then echo $file; elif [[ $schema = *"diplomatic"* ]]; then echo "TEST $schema checking diplomatic for $file"; elif [[ $schema = *"critical"* ]]; then echo "test $schema checking critical for $file"; echo "test"; fi; done; echo $?;
